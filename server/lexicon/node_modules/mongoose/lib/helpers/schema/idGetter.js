'use strict';


module.exports = function addIdGetter(schema) {
  
  const autoIdGetter = !schema.paths['id'] &&
    schema.paths['_id'] &&
    schema.options.id;
  if (!autoIdGetter) {
    return schema;
  }
  if (schema.aliases && schema.aliases.id) {
    return schema;
  }
  schema.virtual('id').get(idGetter);

  return schema;
};


function idGetter() {
  if (this._id != null) {
    return this._id.toString();
  }

  return null;
}
